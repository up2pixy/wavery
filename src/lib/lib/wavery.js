!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("chroma-js")):"function"==typeof define&&define.amd?define(["chroma-js"],e):"object"==typeof exports?exports.Wavery=e(require("chroma-js")):t.Wavery=e(t["chroma-js"])}(self,t=>(()=>{"use strict";var e={534(e){e.exports=t}},r={};function o(t){var n=r[t];if(void 0!==n)return n.exports;var l=r[t]={exports:{}};return e[t](l,l.exports,o),l.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};o.r(n),o.d(n,{createWavery:()=>d,createWaveryDataURL:()=>p,defaultOptions:()=>u});var l=o(534),i=o.n(l);function a(t){let e=new Array,r=new Array,o=t.length-1,n=new Array,l=new Array,i=new Array,a=new Array;n[0]=0,l[0]=2,i[0]=1,a[0]=t[0]+2*t[1];for(let e=1;e<o-1;e++)n[e]=1,l[e]=4,i[e]=1,a[e]=4*t[e]+2*t[e+1];n[o-1]=2,l[o-1]=7,i[o-1]=0,a[o-1]=8*t[o-1]+t[o];for(let t=1;t<o;t++){let e=n[t]/l[t-1];l[t]=l[t]-e*i[t-1],a[t]=a[t]-e*a[t-1]}e[o-1]=a[o-1]/l[o-1];for(let t=o-2;t>=0;--t)e[t]=(a[t]-i[t]*e[t+1])/l[t];for(let n=0;n<o-1;n++)r[n]=2*t[n+1]-e[n+1];return r[o-1]=.5*(t[o]+e[o-1]),{p1:e,p2:r}}const s="http://www.w3.org/2000/svg",u={width:800,height:600,segmentCount:20,layerCount:10,variance:.75,strokeWidth:0,strokeColor:"#000000",gradientColors:[{colorValue:"#ffff00",position:0},{colorValue:"#ff0000",position:.5},{colorValue:"#000080",position:1}]},h=(t,e,r,o,n,l)=>{const i=t.map(t=>t.x),u=t.map(t=>t.y),h=a(i),d=a(u);let p=`M ${e.x},${e.y} C ${e.x},${e.y} ${i[0]},${u[0]} ${i[0]},${u[0]} `;for(let t=0;t<i.length-1;t++)p+=`C ${h.p1[t]},${d.p1[t]} ${h.p2[t]},${d.p2[t]} ${i[t+1]},${u[t+1]} `;p+=`C ${i[i.length-1]},${u[i.length-1]} ${r.x},${r.y} ${r.x},${r.y} Z`;const c=document.createElementNS(s,"path");return c.setAttributeNS(null,"fill",o),c.setAttributeNS(null,"stroke",n),c.setAttributeNS(null,"stroke-width",l.toString()),c.setAttributeNS(null,"d",p),c},d=t=>{const e={...u,...t},r=((t,e,r,o,n)=>{const l=t/r,i=e/o,a=l*n*.5,s=i*n,u=[];for(let r=i;r<e;r+=i){const e=[];e.push({x:0,y:Math.floor(r)});for(let o=l;o<t;o+=l){const t=r-s/2+Math.random()*s,n=o-a/2+Math.random()*a;e.push({x:Math.floor(n),y:Math.floor(t)})}e.push({x:t,y:Math.floor(r)}),u.push(e)}return u})(e.width,e.height,e.segmentCount,e.layerCount,e.variance),o=document.createElementNS(s,"svg");o.setAttribute("width",e.width.toString()),o.setAttribute("height",e.height.toString()),o.setAttribute("xmlns",s);const n=i().scale(e.gradientColors.map(t=>t.colorValue)).domain(e.gradientColors.map(t=>t.position*r.length)),l=document.createElementNS(s,"rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"height",e.height.toString()),l.setAttributeNS(null,"width",e.width.toString()),l.setAttributeNS(null,"fill",n(0).hex()),l.setAttributeNS(null,"stroke",e.strokeColor),l.setAttributeNS(null,"stroke-width",e.strokeWidth.toString()),o.appendChild(l);for(let t=0;t<r.length;t++)o.appendChild(h(r[t],{x:0,y:e.height},{x:e.width,y:e.height},n(t+1).hex(),e.strokeColor,e.strokeWidth));return o},p=t=>{const e=d(t),r=(new XMLSerializer).serializeToString(e);return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(r)}`};return n})());