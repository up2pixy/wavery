!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("chroma-js")):"function"==typeof define&&define.amd?define(["chroma-js"],t):"object"==typeof exports?exports.Wavery=t(require("chroma-js")):e.Wavery=t(e["chroma-js"])}(self,e=>(()=>{"use strict";var t={534(t){t.exports=e}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{createWavery:()=>p,createWaveryDataURL:()=>f,defaultOptions:()=>i});var a=r(534),l=r.n(a);function s(e){let t=new Array,o=new Array,r=e.length-1,n=new Array,a=new Array,l=new Array,s=new Array;n[0]=0,a[0]=2,l[0]=1,s[0]=e[0]+2*e[1];for(let t=1;t<r-1;t++)n[t]=1,a[t]=4,l[t]=1,s[t]=4*e[t]+2*e[t+1];n[r-1]=2,a[r-1]=7,l[r-1]=0,s[r-1]=8*e[r-1]+e[r];for(let e=1;e<r;e++){let t=n[e]/a[e-1];a[e]=a[e]-t*l[e-1],s[e]=s[e]-t*s[e-1]}t[r-1]=s[r-1]/a[r-1];for(let e=r-2;e>=0;--e)t[e]=(s[e]-l[e]*t[e+1])/a[e];for(let n=0;n<r-1;n++)o[n]=2*e[n+1]-t[n+1];return o[r-1]=.5*(e[r]+t[r-1]),{p1:t,p2:o}}const i={width:800,height:600,segmentCount:20,layerCount:10,variance:.75,strokeWidth:0,strokeColor:"#000000",gradientColors:[{colorValue:"#ffff00",position:0},{colorValue:"#ff0000",position:.5},{colorValue:"#000080",position:1}]},h=(e,t,o,r,n,a)=>{const l=e.map(e=>e.x),i=e.map(e=>e.y),h=s(l),p=s(i);let f=`M ${t.x},${t.y} C ${t.x},${t.y} ${l[0]},${i[0]} ${l[0]},${i[0]} `;for(let e=0;e<l.length-1;e++)f+=`C ${h.p1[e]},${p.p1[e]} ${h.p2[e]},${p.p2[e]} ${l[e+1]},${i[e+1]} `;return f+=`C ${l[l.length-1]},${i[l.length-1]} ${o.x},${o.y} ${o.x},${o.y} Z`,`<path fill="${r}" stroke="${n}" stroke-width="${a}" d="${f}"/>`},p=e=>{const t={...i,...e},o=((e,t,o,r,n)=>{const a=e/o,l=t/r,s=a*n*.5,i=l*n,h=[];for(let o=l;o<t;o+=l){const t=[];t.push({x:0,y:Math.floor(o)});for(let r=a;r<e;r+=a){const e=o-i/2+Math.random()*i,n=r-s/2+Math.random()*s;t.push({x:Math.floor(n),y:Math.floor(e)})}t.push({x:e,y:Math.floor(o)}),h.push(t)}return h})(t.width,t.height,t.segmentCount,t.layerCount,t.variance),r=l().scale(t.gradientColors.map(e=>e.colorValue)).domain(t.gradientColors.map(e=>e.position*o.length)),n=[];n.push(`<rect x="0" y="0" height="${t.height}" width="${t.width}" fill="${r(0).hex()}" stroke="${t.strokeColor}" stroke-width="${t.strokeWidth}"/>`);for(let e=0;e<o.length;e++)n.push(h(o[e],{x:0,y:t.height},{x:t.width,y:t.height},r(e+1).hex(),t.strokeColor,t.strokeWidth));return`<svg width="${t.width}" height="${t.height}" xmlns="http://www.w3.org/2000/svg">${n.join("")}</svg>`},f=e=>{const t=p(e);return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t)}`};return n})());